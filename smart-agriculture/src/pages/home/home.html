<ion-header>
  <ion-navbar color="dark">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Smart Agriculture Data Analysis</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-card>
    
    <ion-card-header>
      Soil Sensor
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col>
            <rg-gauge-chart
                [canvasWidth]="canvasWidth"
                [needleValue]="soil1"
                [centralLabel]="centralLabel"
                [options]="options"
                [name]="'Soil 1'"
                [bottomLabel]="bottomSoil1"></rg-gauge-chart>
          </ion-col>
          <ion-col>
            <rg-gauge-chart
                [canvasWidth]="canvasWidth"
                [needleValue]="soil2"
                [centralLabel]="centralLabel"
                [options]="options"
                [name]="'Soil 2'"
                [bottomLabel]="bottomSoil2"></rg-gauge-chart>
          </ion-col>
        </ion-row>
      </ion-grid>
      
    </ion-card-content>
  
  </ion-card>
  <ion-card>
    
    <ion-card-header>
      Soil Temperature Sensor
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col>
            <rg-gauge-chart
                [canvasWidth]="canvasWidth"
                [needleValue]="soilTemp1"
                [centralLabel]="centralLabel"
                [options]="options"
                [name]="'Soil Temp 1'"
                [bottomLabel]="bottomSoilTemp1"></rg-gauge-chart>
        </ion-col>
        <ion-col>
              <rg-gauge-chart
                  [canvasWidth]="canvasWidth"
                  [needleValue]="soilTemp2"
                  [centralLabel]="centralLabel"
                  [options]="options"
                  [name]="'Soil Temp 2'"
                  [bottomLabel]="bottomSoilTemp2"></rg-gauge-chart>
          </ion-col>
        </ion-row>
      </ion-grid>
      
    </ion-card-content>
  
  </ion-card>
  <ion-card>
    
    <ion-card-header>
      DHT Sensor
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col>
            <h6 ion-text text-center color="light">Temperature</h6>
             <h1 ion-text text-center color="light"><ion-icon name="md-thermometer"></ion-icon>  {{temperature}} C</h1>
          </ion-col>
          <ion-col>
            <h6 ion-text text-center color="light">Humidity</h6>
            <h1 ion-text text-center color="light"><ion-icon name="md-water"></ion-icon> {{humidity}} %</h1>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      Relay Status
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col text-center>
            <h6 ion-text text-center color="light">Relay A</h6>
            <h1 ion-text color="light">{{relayA}}</h1>
          </ion-col>
          <ion-col text-center>
            <h6 ion-text text-center color="light">Relay B</h6>
            <h1 ion-text color="light">{{relayB}}</h1>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      Light Sensor
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col text-center>
            <h1><ion-icon name="sunny" color="light"></ion-icon></h1>
            <h1 ion-text color="light">{{light}} Lux</h1>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      NPK Sensor
    </ion-card-header>
    <ion-card-content>
      <div style="display: block">
        <canvas baseChart
                    [options] = "pieChartOptions"
                    [data]="pieChartData"
                    [labels]="pieChartLabels"
                    [chartType]="pieChartType"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)"></canvas>
      </div>
    </ion-card-content>
  </ion-card>
  <!-- <ion-card>
    <ion-card-header>
      Live Chart
    </ion-card-header>
    <ion-card-content>
      <div id="dynamicSpline" style="width:100%; height:400px;"></div>
    </ion-card-content>
  </ion-card> -->
<ion-grid>
  <ion-row>
      <ion-col>
          <canvas baseChart width="300" height="400" *ngIf="isData"
                [datasets]="lineChartData"
                [labels]="lineChartLabels"
                [options]="lineChartOptions"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
                (chartHover)="chartHovered($event)"
                (chartClick)="chartClicked($event)"></canvas>
      </ion-col>
  </ion-row>
  <ion-row>
      <ion-col>
          <button ion-button full color="success" (click)="getLatest()">Get Latest graph</button>
      </ion-col>
      <ion-col>
        <button ion-button full color="success" (click)="download()">Export Data to CSV</button>
    </ion-col>
  </ion-row>
</ion-grid>
</ion-content>
